<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>My Account | Melissa's Melts</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
      tailwind.config = {
          theme: {
              extend: {
                  colors: {
                      pink: {
                          50: '#FFF5F7',
                          100: '#FFEAEF',
                          200: '#FFCBD8',
                          300: '#FFABC1',
                          400: '#FF8CAA',
                          500: '#FF6D93',
                          600: '#FF4E7D',
                          700: '#FF2F67',
                          800: '#FF1051',
                          900: '#E0003B',
                      }
                  },
                  fontFamily: {
                      'sans': ['Montserrat', 'sans-serif'],
                      'serif': ['Playfair Display', 'serif'],
                  },
                  boxShadow: {
                      'soft': '0 10px 30px rgba(0, 0, 0, 0.05)',
                      'glow': '0 5px 20px rgba(255, 109, 147, 0.25)',
                      'card': '0 15px 35px rgba(0, 0, 0, 0.07)',
                  }
              }
          }
      }
  </script>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;600;700&family=Playfair+Display:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
      /* Custom Animations */
      @keyframes fadeUp {
          from {
              opacity: 0;
              transform: translateY(30px);
          }
          to {
              opacity: 1;
              transform: translateY(0);
          }
      }
      
      .animate-fade-up {
          animation: fadeUp 0.8s ease forwards;
          opacity: 0;
      }
      
      .delay-100 {
          animation-delay: 0.1s;
      }
      
      .delay-200 {
          animation-delay: 0.2s;
      }
      
      .delay-300 {
          animation-delay: 0.3s;
      }
      
      /* Gradient Text */
      .gradient-text {
          background: linear-gradient(to right, #FF4E7D, #FF8CAA);
          -webkit-background-clip: text;
          -webkit-text-fill-color: transparent;
      }
      
      /* Fancy Underline */
      .fancy-underline {
          position: relative;
          display: inline-block;
      }
      
      .fancy-underline::after {
          content: '';
          position: absolute;
          width: 70px;
          height: 3px;
          bottom: -12px;
          left: 50%;
          transform: translateX(-50%);
          background: linear-gradient(to right, #FF4E7D, #FF8CAA);
          border-radius: 3px;
      }
      
      /* Navbar Animation */
      .nav-link {
          position: relative;
      }
      
      .nav-link::after {
          content: '';
          position: absolute;
          width: 0;
          height: 2px;
          bottom: -4px;
          left: 0;
          background-color: #FF6D93;
          transition: width 0.3s ease;
      }
      
      .nav-link:hover::after {
          width: 100%;
      }
      
      /* Search Results */
      .search-results {
          display: none;
          position: absolute;
          top: 100%;
          left: 0;
          right: 0;
          background: white;
          border-radius: 0 0 0.5rem 0.5rem;
          box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
          z-index: 50;
          max-height: 300px;
          overflow-y: auto;
      }
      
      .search-container:focus-within .search-results {
          display: block;
      }
      
      .search-result-item {
          padding: 0.75rem 1rem;
          border-bottom: 1px solid #f0f0f0;
          cursor: pointer;
          transition: background-color 0.2s;
      }
      
      .search-result-item:hover {
          background-color: #FFF5F7;
      }
      
      .search-result-item:last-child {
          border-bottom: none;
      }
      
      /* Custom Button Styles */
      .btn-primary {
          background: linear-gradient(to right, #FF4E7D, #FF8CAA);
          transition: all 0.3s ease;
          position: relative;
          z-index: 1;
          overflow: hidden;
      }
      
      .btn-primary::before {
          content: '';
          position: absolute;
          top: 0;
          left: 0;
          width: 0%;
          height: 100%;
          background: linear-gradient(to right, #FF2F67, #FF6D93);
          transition: all 0.3s ease;
          z-index: -1;
      }
      
      .btn-primary:hover::before {
          width: 100%;
      }
      
      /* Tab Styles */
      .tab {
          position: relative;
          cursor: pointer;
          transition: all 0.3s ease;
      }
      
      .tab.active {
          color: #FF6D93;
          font-weight: 600;
      }
      
      .tab.active::after {
          content: '';
          position: absolute;
          bottom: -10px;
          left: 0;
          width: 100%;
          height: 3px;
          background: linear-gradient(to right, #FF4E7D, #FF8CAA);
          border-radius: 3px;
      }
      
      /* Form Styles */
      .form-input {
          width: 100%;
          padding: 0.75rem 1rem;
          border: 1px solid #e2e8f0;
          border-radius: 0.5rem;
          transition: all 0.3s ease;
      }
      
      .form-input:focus {
          outline: none;
          border-color: #FF6D93;
          box-shadow: 0 0 0 3px rgba(255, 109, 147, 0.1);
      }
      
      .form-label {
          display: block;
          margin-bottom: 0.5rem;
          font-weight: 500;
          color: #4a5568;
      }
  </style>
</head>
<body class="font-sans bg-pink-50 text-gray-800">
  <!-- Announcement Bar -->
  <div class="bg-gradient-to-r from-pink-700 to-pink-500 text-white text-center py-2.5 text-sm font-medium tracking-wide">
      <p>Free shipping on orders over Â£50!</p>
  </div>

  <!-- Header/Navigation -->
  <header class="bg-white shadow-soft sticky top-0 z-50">
      <div class="container mx-auto px-4 py-4">
          <div class="flex justify-between items-center">
              <div class="flex items-center">
                  <a href="index.html" class="text-3xl font-serif font-bold gradient-text">Melissa's Melts</a>
              </div>
              
              <div class="hidden md:flex items-center space-x-8">
                  <a href="index.html" class="nav-link font-medium text-gray-600 hover:text-pink-500 transition-colors">Home</a>
                  <a href="shop.html" class="nav-link font-medium text-gray-600 hover:text-pink-500 transition-colors">Shop</a>
                  <a href="about.html" class="nav-link font-medium text-gray-600 hover:text-pink-500 transition-colors">About</a>
                  <a href="contact.html" class="nav-link font-medium text-gray-600 hover:text-pink-500 transition-colors">Contact</a>
              </div>
              
              <div class="flex items-center space-x-6">
                  <div class="relative search-container">
                      <input type="text" id="search-input" placeholder="Search products..." class="py-2 px-4 pr-10 rounded-full border border-gray-300 focus:outline-none focus:ring-2 focus:ring-pink-500 focus:border-transparent w-40 md:w-60">
                      <button class="absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500">
                          <i class="fas fa-search"></i>
                      </button>
                      <div class="search-results">
                          <!-- Search results will be populated here -->
                      </div>
                  </div>
                  
                  <div id="user-container">
                      <div class="relative">
                          <a href="account.html" class="text-gray-600 hover:text-pink-500 transition-colors" id="user-icon">
                              <i class="fas fa-user text-lg"></i>
                          </a>
                          <div id="user-dropdown" class="hidden absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg py-1 z-50">
                              <button id="logout-button" class="block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-pink-50">
                                  Logout
                              </button>
                          </div>
                      </div>
                      <!-- Google Sign-In Button (hidden by default) -->
                      <div id="g_id_onload"
                          data-client_id="741864469861-nnf5f1elnr7ld8lhos3rsod8e2o2a8hb.apps.googleusercontent.com"
                          data-context="signin"
                          data-callback="handleCredentialResponse"
                          data-auto_prompt="false"
                          style="display: none;">
                      </div>
                      <div class="g_id_signin"
                          data-type="standard"
                          data-size="large"
                          data-theme="outline"
                          data-text="sign_in_with"
                          data-shape="rectangular"
                          data-logo_alignment="left"
                          style="display: none;">
                      </div>
                  </div>
                  
                  <a href="cart.html" class="text-pink-600 relative" id="cart-icon">
                      <i class="fas fa-shopping-bag text-lg"></i>
                      <span class="absolute -top-2 -right-2 bg-pink-500 text-white rounded-full w-5 h-5 flex items-center justify-center text-xs font-bold" id="cart-count">0</span>
                  </a>
                  
                  <!-- Mobile Menu Button -->
                  <button class="md:hidden text-gray-600 hover:text-pink-500 transition-colors" id="mobile-menu-button">
                      <i class="fas fa-bars text-xl"></i>
                  </button>
              </div>
          </div>
          
          <!-- Mobile Menu (Hidden by default) -->
          <div class="md:hidden hidden mt-4 pb-2" id="mobile-menu">
              <div class="flex flex-col space-y-3">
                  <a href="index.html" class="font-medium text-gray-600 hover:text-pink-500 transition-colors py-2">Home</a>
                  <a href="shop.html" class="font-medium text-gray-600 hover:text-pink-500 transition-colors py-2">Shop</a>
                  <a href="about.html" class="font-medium text-gray-600 hover:text-pink-500 transition-colors py-2">About</a>
                  <a href="contact.html" class="font-medium text-gray-600 hover:text-pink-500 transition-colors py-2">Contact</a>
              </div>
          </div>
      </div>
  </header>

  <!-- Page Title -->
  <section class="bg-white py-8">
      <div class="container mx-auto px-4">
          <h1 class="text-3xl md:text-4xl font-serif font-bold text-center">My Account</h1>
      </div>
  </section>

  <!-- Account Content -->
  <section class="py-12 bg-pink-50">
      <div class="container mx-auto px-4">
          <!-- Login Required Message (shown when not logged in) -->
          <div id="login-required" class="hidden bg-white rounded-xl shadow-card p-8 text-center max-w-2xl mx-auto animate-fade-up">
              <div class="mb-6 text-pink-500 text-6xl">
                  <i class="fas fa-lock"></i>
              </div>
              <h2 class="text-2xl font-serif font-bold mb-4">Login Required</h2>
              <p class="text-gray-600 mb-8">Please sign in to view your account information.</p>
              <div id="googleSignInButton" class="flex justify-center">
                  <!-- Google Sign-In Button will be rendered here -->
              </div>
          </div>
          
          <!-- Account Content (shown when logged in) -->
          <div id="account-content" class="hidden">
              <div class="bg-white rounded-xl shadow-card overflow-hidden max-w-4xl mx-auto">
                  <!-- Account Header -->
                  <div class="p-8 border-b border-gray-100 flex flex-col md:flex-row items-center justify-between">
                      <div class="flex items-center mb-4 md:mb-0">
                          <div id="profile-picture" class="w-16 h-16 rounded-full bg-pink-100 flex items-center justify-center mr-4 overflow-hidden">
                              <i class="fas fa-user text-pink-500 text-2xl"></i>
                          </div>
                          <div>
                              <h2 class="text-2xl font-medium" id="user-name">User Name</h2>
                              <p class="text-gray-500" id="user-email">user@example.com</p>
                          </div>
                      </div>
                      <div>
                          <div class="bg-pink-100 rounded-lg px-4 py-2 flex items-center">
                              <i class="fas fa-gift text-pink-500 mr-2"></i>
                              <span class="text-gray-700">Loyalty Points: <span id="loyalty-points" class="font-bold">0</span></span>
                          </div>
                      </div>
                  </div>
                  
                  <!-- Account Tabs -->
                  <div class="border-b border-gray-100">
                      <div class="flex overflow-x-auto">
                          <div class="tab active px-6 py-4 text-center" data-tab="profile">Profile</div>
                          <div class="tab px-6 py-4 text-center" data-tab="orders">Orders</div>
                          <div class="tab px-6 py-4 text-center" data-tab="addresses">Addresses</div>
                          <div class="tab px-6 py-4 text-center" data-tab="password">Password</div>
                      </div>
                  </div>
                  
                  <!-- Tab Content -->
                  <div class="p-6">
                      <!-- Profile Tab -->
                      <div id="profile-tab" class="tab-content">
                          <form id="profile-form" class="space-y-6">
                              <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                  <div>
                                      <label for="first-name" class="form-label">First Name</label>
                                      <input type="text" id="first-name" class="form-input" placeholder="Enter your first name">
                                  </div>
                                  <div>
                                      <label for="last-name" class="form-label">Last Name</label>
                                      <input type="text" id="last-name" class="form-input" placeholder="Enter your last name">
                                  </div>
                                  <div>
                                      <label for="display-name" class="form-label">Display Name</label>
                                      <input type="text" id="display-name" class="form-input" placeholder="Enter your display name">
                                  </div>
                                  <div>
                                      <label for="phone" class="form-label">Phone Number</label>
                                      <input type="tel" id="phone" class="form-input" placeholder="Enter your phone number">
                                  </div>
                              </div>
                              
                              <div>
                                  <label for="bio" class="form-label">Bio</label>
                                  <textarea id="bio" rows="4" class="form-input" placeholder="Tell us a bit about yourself"></textarea>
                              </div>
                              
                              <div>
                                  <button type="submit" class="btn-primary text-white font-medium py-2 px-6 rounded-full shadow-glow">Save Changes</button>
                              </div>
                          </form>
                      </div>
                      
                      <!-- Orders Tab -->
                      <div id="orders-tab" class="tab-content hidden">
                          <div id="orders-list" class="space-y-6">
                              <!-- Orders will be populated here -->
                              <div class="text-center py-8 text-gray-500" id="no-orders">
                                  <div class="text-5xl mb-4">
                                      <i class="fas fa-shopping-bag"></i>
                                  </div>
                                  <p>You haven't placed any orders yet.</p>
                                  <a href="shop.html" class="text-pink-500 hover:underline mt-2 inline-block">Start shopping</a>
                              </div>
                          </div>
                      </div>
                      
                      <!-- Addresses Tab -->
                      <div id="addresses-tab" class="tab-content hidden">
                          <div class="mb-6 flex justify-between items-center">
                              <h3 class="text-lg font-medium">Your Addresses</h3>
                              <button id="add-address-btn" class="text-pink-500 hover:text-pink-600 transition-colors">
                                  <i class="fas fa-plus mr-1"></i> Add New Address
                              </button>
                          </div>
                          
                          <div id="addresses-list" class="grid grid-cols-1 md:grid-cols-2 gap-6">
                              <!-- Addresses will be populated here -->
                              <div class="text-center py-8 text-gray-500 col-span-2" id="no-addresses">
                                  <div class="text-5xl mb-4">
                                      <i class="fas fa-map-marker-alt"></i>
                                  </div>
                                  <p>You haven't added any addresses yet.</p>
                              </div>
                          </div>
                          
                          <!-- Add/Edit Address Form (Hidden by default) -->
                          <div id="address-form-container" class="hidden mt-8 border-t border-gray-100 pt-6">
                              <h3 class="text-lg font-medium mb-4" id="address-form-title">Add New Address</h3>
                              <form id="address-form" class="space-y-6">
                                  <input type="hidden" id="address-id">
                                  <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                      <div>
                                          <label for="address-name" class="form-label">Address Name</label>
                                          <input type="text" id="address-name" class="form-input" placeholder="Home, Work, etc.">
                                      </div>
                                      <div>
                                          <label for="full-name" class="form-label">Full Name</label>
                                          <input type="text" id="full-name" class="form-input" placeholder="Enter full name">
                                      </div>
                                      <div class="md:col-span-2">
                                          <label for="street-address" class="form-label">Street Address</label>
                                          <input type="text" id="street-address" class="form-input" placeholder="Enter street address">
                                      </div>
                                      <div>
                                          <label for="city" class="form-label">City</label>
                                          <input type="text" id="city" class="form-input" placeholder="Enter city">
                                      </div>
                                      <div>
                                          <label for="postal-code" class="form-label">Postal Code</label>
                                          <input type="text" id="postal-code" class="form-input" placeholder="Enter postal code">
                                      </div>
                                      <div>
                                          <label for="country" class="form-label">Country</label>
                                          <select id="country" class="form-input">
                                              <option value="">Select Country</option>
                                              <option value="UK">United Kingdom</option>
                                              <option value="US">United States</option>
                                              <option value="CA">Canada</option>
                                              <option value="AU">Australia</option>
                                          </select>
                                      </div>
                                      <div>
                                          <label for="phone-number" class="form-label">Phone Number</label>
                                          <input type="tel" id="phone-number" class="form-input" placeholder="Enter phone number">
                                      </div>
                                  </div>
                                  
                                  <div class="flex items-center">
                                      <input type="checkbox" id="default-address" class="mr-2">
                                      <label for="default-address" class="text-gray-700">Set as default address</label>
                                  </div>
                                  
                                  <div class="flex space-x-4">
                                      <button type="submit" class="btn-primary text-white font-medium py-2 px-6 rounded-full shadow-glow">Save Address</button>
                                      <button type="button" id="cancel-address-btn" class="bg-gray-200 hover:bg-gray-300 text-gray-700 font-medium py-2 px-6 rounded-full transition-colors">Cancel</button>
                                  </div>
                              </form>
                          </div>
                      </div>
                      
                      <!-- Password Tab -->
                      <div id="password-tab" class="tab-content hidden">
                          <div class="max-w-md mx-auto">
                              <div class="bg-yellow-50 border-l-4 border-yellow-400 p-4 mb-6">
                                  <div class="flex">
                                      <div class="flex-shrink-0">
                                          <i class="fas fa-exclamation-triangle text-yellow-400"></i>
                                      </div>
                                      <div class="ml-3">
                                          <p class="text-sm text-yellow-700">
                                              You're signed in with Google. Password management is handled by Google.
                                          </p>
                                      </div>
                                  </div>
                              </div>
                              
                              <p class="text-gray-600 mb-4">To change your password, please visit your Google account settings.</p>
                              
                              <a href="https://myaccount.google.com/security" target="_blank" class="btn-primary text-white font-medium py-2 px-6 rounded-full shadow-glow inline-block">
                                  Go to Google Account
                              </a>
                          </div>
                      </div>
                  </div>
              </div>
          </div>
      </div>
  </section>

  <!-- Footer -->
  <footer class="bg-gray-900 text-white pt-20 pb-10">
      <div class="container mx-auto px-4">
          <div class="grid grid-cols-1 md:grid-cols-4 gap-10">
              <!-- Company Info -->
              <div>
                  <h3 class="text-2xl font-serif font-bold mb-6 gradient-text">Melissa's Melts</h3>
                  <p class="text-gray-400 mb-6 leading-relaxed">Handcrafted soaps and wax melts made with love and natural ingredients for your home and body.</p>
                  <div class="flex space-x-4">
                      <a href="#" class="bg-pink-500/20 hover:bg-pink-500/40 w-10 h-10 rounded-full flex items-center justify-center transition-colors">
                          <i class="fab fa-facebook-f text-pink-400"></i>
                      </a>
                      <a href="#" class="bg-pink-500/20 hover:bg-pink-500/40 w-10 h-10 rounded-full flex items-center justify-center transition-colors">
                          <i class="fab fa-instagram text-pink-400"></i>
                      </a>
                      <a href="#" class="bg-pink-500/20 hover:bg-pink-500/40 w-10 h-10 rounded-full flex items-center justify-center transition-colors">
                          <i class="fab fa-pinterest-p text-pink-400"></i>
                      </a>
                      <a href="#" class="bg-pink-500/20 hover:bg-pink-500/40 w-10 h-10 rounded-full flex items-center justify-center transition-colors">
                          <i class="fab fa-tiktok text-pink-400"></i>
                      </a>
                  </div>
              </div>
              
              <!-- Shop Links -->
              <div>
                  <h3 class="text-lg font-medium mb-6 relative pb-2 after:content-[''] after:absolute after:bottom-0 after:left-0 after:w-12 after:h-0.5 after:bg-pink-500">Shop</h3>
                  <ul class="space-y-3">
                      <li><a href="shop.html" class="text-gray-400 hover:text-pink-400 transition-colors inline-block">All Products</a></li>
                      <li><a href="shop.html" class="text-gray-400 hover:text-pink-400 transition-colors inline-block">Soaps</a></li>
                      <li><a href="shop.html" class="text-gray-400 hover:text-pink-400 transition-colors inline-block">Wax Melts</a></li>
                      <li><a href="shop.html" class="text-gray-400 hover:text-pink-400 transition-colors inline-block">Gift Sets</a></li>
                      <li><a href="shop.html" class="text-gray-400 hover:text-pink-400 transition-colors inline-block">New Arrivals</a></li>
                      <li><a href="shop.html" class="text-gray-400 hover:text-pink-400 transition-colors inline-block">Best Sellers</a></li>
                  </ul>
              </div>
              
              <!-- Information -->
              <div>
                  <h3 class="text-lg font-medium mb-6 relative pb-2 after:content-[''] after:absolute after:bottom-0 after:left-0 after:w-12 after:h-0.5 after:bg-pink-500">Information</h3>
                  <ul class="space-y-3">
                      <li><a href="about.html" class="text-gray-400 hover:text-pink-400 transition-colors inline-block">About Us</a></li>
                      <li><a href="contact.html" class="text-gray-400 hover:text-pink-400 transition-colors inline-block">Contact</a></li>
                      <li><a href="#" class="text-gray-400 hover:text-pink-400 transition-colors inline-block">FAQ</a></li>
                      <li><a href="#" class="text-gray-400 hover:text-pink-400 transition-colors inline-block">Shipping & Returns</a></li>
                      <li><a href="#" class="text-gray-400 hover:text-pink-400 transition-colors inline-block">Privacy Policy</a></li>
                      <li><a href="#" class="text-gray-400 hover:text-pink-400 transition-colors inline-block">Terms & Conditions</a></li>
                  </ul>
              </div>
              
              <!-- Contact -->
              <div>
                  <h3 class="text-lg font-medium mb-6 relative pb-2 after:content-[''] after:absolute after:bottom-0 after:left-0 after:w-12 after:h-0.5 after:bg-pink-500">Contact Us</h3>
                  <ul class="space-y-4">
                      <li class="flex items-start">
                          <i class="fas fa-map-marker-alt mt-1.5 mr-3 text-pink-400"></i>
                          <span class="text-gray-400">123 Soap Street, Meltville, ML 12345</span>
                      </li>
                      <li class="flex items-start">
                          <i class="fas fa-envelope mt-1.5 mr-3 text-pink-400"></i>
                          <span class="text-gray-400">hello@melissasmelts.com</span>
                      </li>
                      <li class="flex items-start">
                          <i class="fas fa-phone mt-1.5 mr-3 text-pink-400"></i>
                          <span class="text-gray-400">(123) 456-7890</span>
                      </li>
                      <li class="flex items-start">
                          <i class="fas fa-clock mt-1.5 mr-3 text-pink-400"></i>
                          <span class="text-gray-400">Mon-Fri: 9am - 5pm EST</span>
                      </li>
                  </ul>
              </div>
          </div>
          
          <div class="border-t border-gray-800 mt-16 pt-8 flex flex-col md:flex-row justify-between items-center">
              <p class="text-gray-500 text-sm mb-4 md:mb-0">&copy; 2023 Melissa's Melts. All rights reserved.</p>
              <div class="flex items-center space-x-6">
                  <img src="https://cdn.pixabay.com/photo/2021/12/06/13/48/visa-6850402_640.png" alt="Visa" class="h-6">
                  <img src="https://cdn.pixabay.com/photo/2021/12/06/13/53/mastercard-6850429_640.png" alt="Mastercard" class="h-6">
                  <img src="https://cdn.pixabay.com/photo/2022/01/09/07/23/american-express-6926131_640.png" alt="American Express" class="h-6">
                  <img src="https://cdn.pixabay.com/photo/2021/12/06/13/45/paypal-6850398_640.png" alt="PayPal" class="h-6">
              </div>
          </div>
      </div>
  </footer>

  <!-- JavaScript -->
  <script>
      document.addEventListener('DOMContentLoaded', function() {
          // Mobile Menu Toggle
          const mobileMenuButton = document.getElementById('mobile-menu-button');
          const mobileMenu = document.getElementById('mobile-menu');
          
          mobileMenuButton.addEventListener('click', function() {
              mobileMenu.classList.toggle('hidden');
          });
          
          // Search Functionality
          const searchInput = document.getElementById('search-input');
          const searchResults = document.querySelector('.search-results');
          
          // Product database for search
          const products = [
              { name: 'Massage Soap', url: 'massage-soap.html' },
              { name: 'Lavender Soap', url: 'massage-soap.html' },
              { name: 'Rose Wax Melts', url: 'massage-soap.html' },
              { name: 'Vanilla Soap', url: 'massage-soap.html' },
              { name: 'Citrus Wax Melts', url: 'massage-soap.html' }
          ];
          
          searchInput.addEventListener('input', function() {
              const query = this.value.toLowerCase();
              
              // Clear previous results
              searchResults.innerHTML = '';
              
              if (query.length < 2) return;
              
              // Filter products based on search query
              const filteredProducts = products.filter(product => 
                  product.name.toLowerCase().includes(query)
              );
              
              // Display results
              if (filteredProducts.length > 0) {
                  filteredProducts.forEach(product => {
                      const resultItem = document.createElement('div');
                      resultItem.className = 'search-result-item';
                      resultItem.innerHTML = `
                          <div class="flex items-center">
                              <div class="w-10 h-10 bg-pink-100 rounded-full flex items-center justify-center mr-3">
                                  <i class="fas fa-soap text-pink-500"></i>
                              </div>
                              <div>
                                  <p class="font-medium">${product.name}</p>
                              </div>
                          </div>
                      `;
                      resultItem.addEventListener('click', function() {
                          window.location.href = product.url;
                      });
                      searchResults.appendChild(resultItem);
                  });
              } else {
                  searchResults.innerHTML = `
                      <div class="p-4 text-center text-gray-500">
                          No products found for "${query}"
                      </div>
                  `;
              }
          });
          
          // Close search results when clicking outside
          document.addEventListener('click', function(event) {
              if (!event.target.closest('.search-container')) {
                  searchResults.style.display = 'none';
              }
          });
          
          searchInput.addEventListener('focus', function() {
              if (searchResults.children.length > 0) {
                  searchResults.style.display = 'block';
              }
          });
          
          // Check if user is logged in
          const user = JSON.parse(localStorage.getItem('user'));
          if (user) {
              updateUserUI(user);
              showAccountContent(user);
          } else {
              showLoginRequired();
          }

          // Google Sign-In
          window.handleCredentialResponse = function(response) {
              // Send the token to your server for verification
              const token = response.credential;
              
              // For demo purposes, decode the JWT to get user info
              // In production, this should be verified on the server
              const base64Url = token.split('.')[1];
              const base64 = base64Url.replace(/-/g, '+').replace(/_/g, '/');
              const jsonPayload = decodeURIComponent(atob(base64).split('').map(function(c) {
                  return '%' + ('00' + c.charCodeAt(0).toString(16)).slice(-2);
              }).join(''));
              
              const payload = JSON.parse(jsonPayload);
              
              // Create user object
              const user = {
                  userId: payload.sub,
                  name: payload.name,
                  email: payload.email,
                  picture: payload.picture,
                  points: 0,
                  profile: {
                      firstName: payload.given_name || '',
                      lastName: payload.family_name || '',
                      displayName: payload.name || '',
                      phone: '',
                      bio: ''
                  },
                  addresses: []
              };
              
              // Store user info in localStorage
              localStorage.setItem('user', JSON.stringify(user));
              localStorage.setItem('token', token);
              
              // Update UI and show account content
              updateUserUI(user);
              showAccountContent(user);
          };

          function updateUserUI(user) {
              // Update user icon
              const userIcon = document.getElementById('user-icon');
              const userDropdown = document.getElementById('user-dropdown');
              
              if (userIcon && user.picture) {
                  userIcon.innerHTML = `<img src="${user.picture}" alt="${user.name}" class="w-6 h-6 rounded-full">`;
                  userIcon.href = 'account.html';
                  
                  // Add click event to toggle dropdown
                  userIcon.addEventListener('click', function(e) {
                      if (window.location.pathname.includes('account.html')) {
                          e.preventDefault();
                      }
                      userDropdown.classList.toggle('hidden');
                  });
              } else if (userIcon && user.name) {
                  // If no picture, use first letter of name
                  const initials = user.name.charAt(0).toUpperCase();
                  userIcon.innerHTML = `<div class="w-6 h-6 rounded-full bg-pink-500 text-white flex items-center justify-center text-xs font-bold">${initials}</div>`;
                  userIcon.href = 'account.html';
                  
                  // Add click event to toggle dropdown
                  userIcon.addEventListener('click', function(e) {
                      if (window.location.pathname.includes('account.html')) {
                          e.preventDefault();
                      }
                      userDropdown.classList.toggle('hidden');
                  });
              }
              
              // Close dropdown when clicking outside
              document.addEventListener('click', function(e) {
                  if (!userIcon.contains(e.target) && !userDropdown.contains(e.target)) {
                      userDropdown.classList.add('hidden');
                  }
              });
              
              // Update cart count
              const cart = JSON.parse(localStorage.getItem('cart')) || [];
              const cartCount = cart.reduce((total, item) => total + item.quantity, 0);
              document.getElementById('cart-count').textContent = cartCount;
          }

          function showLoginRequired() {
              document.getElementById('login-required').classList.remove('hidden');
              document.getElementById('account-content').classList.add('hidden');

              // Add Google Sign-In button
              const googleSignInButton = document.getElementById('googleSignInButton');
              if (googleSignInButton) {
                  googleSignInButton.innerHTML = '';
                  if (typeof google !== 'undefined' && google.accounts) {
                      google.accounts.id.renderButton(
                          googleSignInButton,
                          { theme: 'filled_blue', size: 'large', width: 250 }
                      );
                  } else {
                      // Fallback if Google Sign-In is not available
                      googleSignInButton.innerHTML = `
                          <a href="login.html?redirect=account.html" class="btn-primary text-white font-medium py-3 px-8 rounded-full inline-block shadow-glow">
                              Sign In with Google
                          </a>
                      `;
                  }
              }
          }
          
          function showAccountContent(user) {
              document.getElementById('login-required').classList.add('hidden');
              document.getElementById('account-content').classList.remove('hidden');
              
              // Update profile picture
              const profilePicture = document.getElementById('profile-picture');
              if (profilePicture && user.picture) {
                  profilePicture.innerHTML = `<img src="${user.picture}" alt="${user.name}" class="w-full h-full object-cover">`;
              }
              
              // Update user name and email
              document.getElementById('user-name').textContent = user.name;
              document.getElementById('user-email').textContent = user.email;
              
              // Update loyalty points
              document.getElementById('loyalty-points').textContent = user.points || 0;
              
              // Fill profile form
              if (user.profile) {
                  document.getElementById('first-name').value = user.profile.firstName || '';
                  document.getElementById('last-name').value = user.profile.lastName || '';
                  document.getElementById('display-name').value = user.profile.displayName || user.name || '';
                  document.getElementById('phone').value = user.profile.phone || '';
                  document.getElementById('bio').value = user.profile.bio || '';
              }
              
              // Load addresses
              loadAddresses(user.addresses || []);
              
              // Load orders
              loadOrders();
          }
          
          // Tab switching
          const tabs = document.querySelectorAll('.tab');
          const tabContents = document.querySelectorAll('.tab-content');
          
          tabs.forEach(tab => {
              tab.addEventListener('click', function() {
                  const tabName = this.dataset.tab;
                  
                  // Remove active class from all tabs
                  tabs.forEach(t => t.classList.remove('active'));
                  
                  // Add active class to clicked tab
                  this.classList.add('active');
                  
                  // Hide all tab contents
                  tabContents.forEach(content => content.classList.add('hidden'));
                  
                  // Show selected tab content
                  document.getElementById(`${tabName}-tab`).classList.remove('hidden');
              });
          });
          
          // Profile form submission
          const profileForm = document.getElementById('profile-form');
          
          profileForm.addEventListener('submit', function(e) {
              e.preventDefault();
              
              const user = JSON.parse(localStorage.getItem('user'));
              
              if (!user) return;
              
              // Update user profile
              user.profile = {
                  firstName: document.getElementById('first-name').value,
                  lastName: document.getElementById('last-name').value,
                  displayName: document.getElementById('display-name').value,
                  phone: document.getElementById('phone').value,
                  bio: document.getElementById('bio').value
              };
              
              // Save updated user to localStorage
              localStorage.setItem('user', JSON.stringify(user));
              
              // Show success message
              alert('Profile updated successfully!');
          });
          
          // Address form handling
          const addAddressBtn = document.getElementById('add-address-btn');
          const cancelAddressBtn = document.getElementById('cancel-address-btn');
          const addressFormContainer = document.getElementById('address-form-container');
          const addressForm = document.getElementById('address-form');
          
          addAddressBtn.addEventListener('click', function() {
              // Reset form
              addressForm.reset();
              document.getElementById('address-id').value = '';
              document.getElementById('address-form-title').textContent = 'Add New Address';
              
              // Show form
              addressFormContainer.classList.remove('hidden');
          });
          
          cancelAddressBtn.addEventListener('click', function() {
              // Hide form
              addressFormContainer.classList.add('hidden');
          });
          
          addressForm.addEventListener('submit', function(e) {
              e.preventDefault();
              
              const user = JSON.parse(localStorage.getItem('user'));
              
              if (!user) return;
              
              // Get form values
              const addressId = document.getElementById('address-id').value;
              const address = {
                  id: addressId || Date.now().toString(),
                  name: document.getElementById('address-name').value,
                  fullName: document.getElementById('full-name').value,
                  streetAddress: document.getElementById('street-address').value,
                  city: document.getElementById('city').value,
                  postalCode: document.getElementById('postal-code').value,
                  country: document.getElementById('country').value,
                  phoneNumber: document.getElementById('phone-number').value,
                  isDefault: document.getElementById('default-address').checked
              };
              
              // Initialize addresses array if it doesn't exist
              if (!user.addresses) {
                  user.addresses = [];
              }
              
              // Check if we're editing an existing address
              if (addressId) {
                  // Find and update existing address
                  const addressIndex = user.addresses.findIndex(a => a.id === addressId);
                  if (addressIndex !== -1) {
                      user.addresses[addressIndex] = address;
                  }
              } else {
                  // Add new address
                  user.addresses.push(address);
              }
              
              // If this is the default address, update all other addresses
              if (address.isDefault) {
                  user.addresses.forEach(a => {
                      if (a.id !== address.id) {
                          a.isDefault = false;
                      }
                  });
              }
              
              // Save updated user to localStorage
              localStorage.setItem('user', JSON.stringify(user));
              
              // Reload addresses
              loadAddresses(user.addresses);
              
              // Hide form
              addressFormContainer.classList.add('hidden');
          });
          
          // Load addresses
          function loadAddresses(addresses) {
              const addressesList = document.getElementById('addresses-list');
              const noAddresses = document.getElementById('no-addresses');
              
              if (!addresses || addresses.length === 0) {
                  noAddresses.classList.remove('hidden');
                  return;
              }
              
              noAddresses.classList.add('hidden');
              
              // Clear addresses list
              addressesList.innerHTML = '';
              
              // Add addresses to list
              addresses.forEach(address => {
                  const addressElement = document.createElement('div');
                  addressElement.className = 'border border-gray-200 rounded-lg p-4 relative';
                  
                  if (address.isDefault) {
                      addressElement.classList.add('border-pink-300', 'bg-pink-50');
                  }
                  
                  addressElement.innerHTML = `
                      ${address.isDefault ? '<div class="absolute top-2 right-2 bg-pink-500 text-white text-xs px-2 py-1 rounded-full">Default</div>' : ''}
                      <h4 class="font-medium mb-1">${address.name}</h4>
                      <p class="text-gray-600 text-sm mb-1">${address.fullName}</p>
                      <p class="text-gray-600 text-sm mb-1">${address.streetAddress}</p>
                      <p class="text-gray-600 text-sm mb-1">${address.city}, ${address.postalCode}</p>
                      <p class="text-gray-600 text-sm mb-3">${address.country}</p>
                      <p class="text-gray-600 text-sm mb-3">${address.phoneNumber}</p>
                      <div class="flex space-x-2">
                          <button class="edit-address text-pink-500 hover:text-pink-600 text-sm" data-id="${address.id}">Edit</button>
                          <button class="delete-address text-gray-500 hover:text-gray-600 text-sm" data-id="${address.id}">Delete</button>
                      </div>
                  `;
                  
                  addressesList.appendChild(addressElement);
              });
              
              // Add event listeners to edit and delete buttons
              document.querySelectorAll('.edit-address').forEach(button => {
                  button.addEventListener('click', function() {
                      const addressId = this.dataset.id;
                      editAddress(addressId);
                  });
              });
              
              document.querySelectorAll('.delete-address').forEach(button => {
                  button.addEventListener('click', function() {
                      const addressId = this.dataset.id;
                      deleteAddress(addressId);
                  });
              });
          }
          
          // Edit address
          function editAddress(addressId) {
              const user = JSON.parse(localStorage.getItem('user'));
              
              if (!user || !user.addresses) return;
              
              const address = user.addresses.find(a => a.id === addressId);
              
              if (!address) return;
              
              // Fill form with address data
              document.getElementById('address-id').value = address.id;
              document.getElementById('address-name').value = address.name;
              document.getElementById('full-name').value = address.fullName;
              document.getElementById('street-address').value = address.streetAddress;
              document.getElementById('city').value = address.city;
              document.getElementById('postal-code').value = address.postalCode;
              document.getElementById('country').value = address.country;
              document.getElementById('phone-number').value = address.phoneNumber;
              document.getElementById('default-address').checked = address.isDefault;
              
              // Update form title
              document.getElementById('address-form-title').textContent = 'Edit Address';
              
              // Show form
              addressFormContainer.classList.remove('hidden');
          }
          
          // Delete address
          function deleteAddress(addressId) {
              if (!confirm('Are you sure you want to delete this address?')) return;
              
              const user = JSON.parse(localStorage.getItem('user'));
              
              if (!user || !user.addresses) return;
              
              // Remove address
              user.addresses = user.addresses.filter(a => a.id !== addressId);
              
              // Save updated user to localStorage
              localStorage.setItem('user', JSON.stringify(user));
              
              // Reload addresses
              loadAddresses(user.addresses);
          }
          
          // Load orders
          function loadOrders() {
              const ordersList = document.getElementById('orders-list');
              const noOrders = document.getElementById('no-orders');
              
              // For demo purposes, we'll just show a message
              // In a real app, you would fetch orders from the backend
              noOrders.classList.remove('hidden');
          }
          
          // Add logout functionality
          const logoutButton = document.getElementById('logout-button');
          if (logoutButton) {
              logoutButton.addEventListener('click', function() {
                  // Clear user data from localStorage
                  localStorage.removeItem('user');
                  localStorage.removeItem('token');
                  
                  // Redirect to home page
                  window.location.href = 'index.html';
              });
          }
          
          // Save profile when leaving page
          window.addEventListener('beforeunload', function() {
              // Get form values
              const firstName = document.getElementById('first-name').value;
              const lastName = document.getElementById('last-name').value;
              const displayName = document.getElementById('display-name').value;
              const phone = document.getElementById('phone').value;
              const bio = document.getElementById('bio').value;
              
              // Get user from localStorage
              const user = JSON.parse(localStorage.getItem('user'));
              
              if (!user) return;
              
              // Update user profile
              user.profile = {
                  firstName,
                  lastName,
                  displayName,
                  phone,
                  bio
              };
              
              // Save updated user to localStorage
              localStorage.setItem('user', JSON.stringify(user));
          });
      });

      // Initialize Google Sign-In if user is not logged in
      const user = JSON.parse(localStorage.getItem('user'));
      if (!user && typeof google !== 'undefined' && google.accounts) {
          google.accounts.id.initialize({
              client_id: '741864469861-nnf5f1elnr7ld8lhos3rsod8e2o2a8hb.apps.googleusercontent.com',
              callback: handleCredentialResponse
          });
      }
  </script>
</body>
</html>

